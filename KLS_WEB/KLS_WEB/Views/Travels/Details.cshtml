@model KLS_WEB.Models.Travels.Travel

@{
    ViewData["Title"] = "Detalles del viaje";
}
<style>
    .card,
    .catalog,
    .bg-white {
        box-shadow: 0px 3px 6px #00000029;
    }

    .dot {
        height: 25px;
        width: 25px;
        background-color: #88C78F;
        border-radius: 50%;
        display: inline-block;
    }

    .catalog-list {
        padding: unset;
        padding-left: inherit;
    }

    .catalog {
        width: 11.2rem !important;
        height: 9.7rem !important;
    }

    label {
        text-align: left;
    }
</style>

<div class="pl-5 pr-5">
    <div class="row">
        <div class="col-5 d-flex justify-content-start align-content-center">
            <a href="/Travels" class="d-flex align-items-center" style="text-decoration: none !important;">
                <i class="material-icons icon-red">arrow_back</i>
            </a>
            <div class="text-uppercase poppins medium size-24 pl-2">Viaje @Model.Folio</div>
        </div>
        <div class="col-7 d-flex justify-content-center align-items-center">
            <div class="card w-75 h-100 d-flex flex-row justify-content-around">
                <div class="d-flex justify-content-start w-50">
                    <span class="dot my-auto mr-3 ml-3"></span>
                    <h6 class="my-auto justify-content-start">EN TRÁNSITO</h6>
                </div>
                <div class="w-50 d-flex justify-content-center align-items-center">
                    <h6 class="my-auto">A TIEMPO (0HR)</h6>
                </div>
            </div>
        </div>
    </div>


    <div class="row">

        <div class="col-5" style="margin-top: 1.3rem;">
            <div class="card p-3">

                <form>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Folio de viaje</label>
                        <div class="col-7">
                            <input asp-for="Folio" type="text" class="form-control form-control-sm" id="folio"
                                   disabled="disabled" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Cliente</label>
                        <div class="col-7">
                            <input asp-for="NombreCliente" type="text" class="form-control form-control-sm" id="cliente"
                                   disabled="disabled" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Dirección Origen</label>
                        <div class="col-7">
                            <input asp-for="DireccionRemitente" type="text" class="form-control form-control-sm"
                                   id="direccionorigen" disabled="disabled" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Dirección Destino</label>
                        <div class="col-7">
                            <input asp-for="DireccionDestinatario" type="text" class="form-control form-control-sm"
                                   id="direcciondestino" disabled="disabled" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Ruta</label>
                        <div class="col-7">
                            <input asp-for="NombreRuta" type="text" class="form-control form-control-sm" id="ruta"
                                   disabled="disabled" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Fecha Salida</label>
                        <div class="col-7">
                            <input asp-for="Salida" type="text" class="form-control form-control-sm"
                                   id="fechasalida" disabled="disabled" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Fecha Entrega</label>
                        <div class="col-7">
                            <input asp-for="Llegada" type="text" class="form-control form-control-sm"
                                   id="fechaentrega" disabled="disabled" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Costo</label>
                        <div class="col-7">
                            <input asp-for="Costototal" type="text" class="form-control form-control-sm" id="costo"
                                   disabled="disabled" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Precio Cliente</label>
                        <div class="col-7">
                            <input asp-for="Preciototal" type="text" class="form-control form-control-sm"
                                   id="preciocliente" disabled="disabled" required>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-5 col-form-label col-form-label-sm">Tipo de Unidad</label>
                        <div class="col-7">
                            <input asp-for="TipoUnidadNombre" type="text" class="form-control form-control-sm"
                                   id="tipounidad" disabled="disabled" required>
                        </div>
                    </div>

                </form>

            </div>
        </div>

        <div class="col-7">
            <div class="catalog-list">

                <a href="#" class="catalog" id="servicios">
                    <div class="content">
                        <span class="material-icons">
                            people
                        </span>
                        <div class="name font-barlow">Servicios</div>
                    </div>
                </a>
                <a href="javascript:void(0);" class="catalog" id="requisitos" onclick="{ showPanel(this.id); }">
                    <div class="content" id="requisitos">
                        <span class="material-icons">
                            inventory_2
                        </span>
                        <div class="name font-barlow">Requisitos</div>
                    </div>
                </a>
                <a href="javascript:void(0);" class="catalog" id="mercancia" onclick="{ showPanel(this.id); }">
                    <div class="content">
                        <span class="material-icons">
                            store
                        </span>
                        <div class="name font-barlow">Mercancía</div>
                    </div>
                </a>

                <a href="javascript:void(0);" class="catalog" id="facturacion" onclick="{ showPanel(this.id); }">
                    <div class="content">
                        <span class="material-icons">
                            receipt_long
                        </span>
                        <div class="name font-barlow">Facturación</div>
                    </div>
                </a>

                <a href="javascript:void(0);" class="catalog" id="documentos" onclick="{ showPanel(this.id); }">
                    <div class="content">
                        <span class="material-icons">
                            folder
                        </span>
                        <div class="name font-barlow">Documentos</div>
                    </div>
                </a>
                <a href="javascript:void(0);" class="catalog" id="historial" onclick="{ showPanel(this.id); }">
                    <div class="content">
                        <span class="material-icons">
                            manage_search
                        </span>
                        <div class="name font-barlow">Historial</div>
                    </div>
                </a>
                @*<a href="#" class="catalog">
                    <div class="content">
                    <span class="material-icons">
                    pin_drop
                    </span>
                    <div class="name font-barlow">Monitoreo</div>
                    </div>
                    </a>*@
            </div>
        </div>

    </div>

    <div class="row mt-4 bottomPanel">
        @*Facturacion*@
        <div class="col-6 facturacion d-none">
            <div class="text-left d-flex justify-content-between mb-3">
                <h4>FACTURACIÓN</h4>
                <div style="padding-left:20%;" onclick="selectServicios(this);">
                    <a class="btn btn-sm bg-white" style="font-size:1.8rem;width:3.5rem" href="#">
                        <span class="material-icons">
                            add
                        </span>
                    </a>
                </div>
            </div>

            <table id="table"
                   class="table table-striped table-bordered display table-hover text-uppercase table-facturas"
                   width="100%">
                <thead>
                    <tr>
                        <th>Nombre</th>
                        <th>Fecha de carga</th>
                        <th>Usuario</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="facturacionInfo"></tbody>
            </table>
        </div>

        @*Mercancia*@
        <div class="col-12 mercancia mb-5 d-none">
            <div class="text-left d-flex justify-content-start mb-3">
                <h4>MERCANCIA</h4>
            </div>
            <div class="row">
                <div class="col-6 d-flex flex-column justify-content-between">
                    <div class="card mb-3 p-3">
                        <p class="text-left font-weight-bold">DESCRIPCIÓN</p>
                        <form class="row g-3 text-left" onsubmit="{ event.preventDefault(); postMercancia(this); }">
                            <div class="col-3">
                                <label for="falto" class="form-label">Alto</label>
                                <input type="number" class="form-control" id="falto" name="alto">
                            </div>
                            <div class="col-3">
                                <label for="fancho" class="form-label">Ancho</label>
                                <input type="number" class="form-control" id="fancho" name="ancho">
                            </div>
                            <div class="col-3">
                                <label for="flargo" class="form-label">Largo</label>
                                <input type="number" class="form-control" id="flargo" name="largo">
                            </div>
                            <div class="col-3">
                                <label for="fpeso" class="form-label">Peso</label>
                                <input type="number" class="form-control" id="fpeso" name="peso">
                            </div>
                            <div class="col-3">
                                <label for="fvolumetrico" class="form-label">Peso volumétrico</label>
                                <input type="number" class="form-control" id="fvolumetrico" name="pesovolumetrico">
                            </div>
                            <div class="col-9 d-flex justify-content-end align-items-end">
                                <button class="btn btn-sm btn-link"><i class="material-icons">save</i></button>
                            </div>
                        </form>
                    </div>
                    <div class="card">
                        <form class="text-left mt-3 pr-4">
                            <div class="form-group row">
                                <div class="col-1">
                                    <input type="checkbox" class="custome-check form-control form-control-sm" disabled>
                                </div>
                                <div class="col-5">
                                    <label class="col-form-label col-form-label-sm pl-0"><strong>TIPOS</strong></label>
                                </div>
                                <div class="col-6 text-left">
                                    <label class="col-form-label col-form-label-sm pl-0">
                                        <strong>
                                            COMENTARIOS
                                            ADICIONALES
                                        </strong>
                                    </label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-1">
                                    <input type="checkbox" class="custome-check form-control form-control-sm"
                                           name="densidad" disabled>
                                </div>
                                <div class="col-5">
                                    <label class="col-form-label col-form-label-sm pl-0">DENSIDAD</label>
                                </div>
                                <div class="col-6 text-left">
                                    <select class="form-control form-control-sm" name="densidadval" id="densidad"
                                            style="width:100%" disabled>
                                        <option selected disabled>SELECIONAR</option>
                                        <option value="baja">BAJA</option>
                                        <option value="media">MEDIA</option>
                                        <option value="alta">ALTA</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-1">
                                    <input type="checkbox" class="custome-check form-control form-control-sm"
                                           name="tipopresentacion" disabled>
                                </div>
                                <div class="col-5">
                                    <label class="col-form-label col-form-label-sm pl-0">TIPO PRESENTACIÓN</label>
                                </div>
                                <div class="col-6 text-left">
                                    <select class="form-control form-control-sm" name="tipopresentacionval"
                                            id="tipopresentacion" style="width:100%" disabled>
                                        <option selected disabled>SELECIONAR</option>
                                        <option value="envase">ENVASE</option>
                                        <option value="granel">GRANEL</option>
                                        <option value="tarima">TARIMA</option>
                                        <option value="otros">OTROS</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-1">
                                    <input type="checkbox" class="custome-check form-control form-control-sm"
                                           name="peligroso" disabled>
                                </div>
                                <div class="col-5">
                                    <label class="col-form-label col-form-label-sm pl-0">PELIGROSO</label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-1">
                                    <input type="checkbox" class="custome-check form-control form-control-sm"
                                           name="material" disabled>
                                </div>
                                <div class="col-5">
                                    <label class="col-form-label col-form-label-sm pl-0">MATERIAL</label>
                                </div>
                                <div class="col-6 text-left">
                                    <select class="form-control form-control-sm" name="materialval" id="material"
                                            style="width:100%" disabled>
                                        <option selected disabled>SELECIONAR</option>
                                        <option value="materiaprima">MATERIA PRIMA</option>
                                        <option value="materialdeenvase">MATERIAL DE ENVASE</option>
                                        <option value="productoterminado">PRODUCTO TERMINADO</option>
                                        <option value="perecederos">PERECEDEROS</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-1">
                                    <input type="checkbox" class="custome-check form-control form-control-sm"
                                           name="derramable" disabled>
                                </div>
                                <div class="col-5">
                                    <label class="col-form-label col-form-label-sm pl-0">DERRAMABLE</label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-1">
                                    <input type="checkbox" class="custome-check form-control form-control-sm"
                                           name="valor" disabled>
                                </div>
                                <div class="col-5">
                                    <label class="col-form-label col-form-label-sm pl-0">VALOR</label>
                                </div>
                                <div class="col-6 text-left">
                                    <select class="form-control form-control-sm" name="valorval" id="valor"
                                            style="width:100%" disabled>
                                        <option selected disabled>SELECIONAR</option>
                                        <option value="alto">ALTO</option>
                                        <option value="medio">MEDIO</option>
                                        <option value="bajo">BAJO</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-1">
                                    <input type="checkbox" class="custome-check form-control form-control-sm"
                                           name="custodia" disabled>
                                </div>
                                <div class="col-5">
                                    <label class="col-form-label col-form-label-sm pl-0">CUSTODIA</label>
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-1">
                                    <input type="checkbox" class="custome-check form-control form-control-sm"
                                           name="olorpenetrante" disabled>
                                </div>
                                <div class="col-5">
                                    <label class="col-form-label col-form-label-sm pl-0">OLOR PENETRANTE</label>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>

                <div class="card col-6 mb-3 p-3">
                    <p class="text-left font-weight-bold">REQUISITOS ESPECIALES</p>
                    <div class="form-floating">
                        <textarea class="form-control" placeholder="OPCIONALES" name="requisitosespeciales"
                                  rows="35" disabled></textarea>
                    </div>
                </div>
            </div>
        </div>


        @* Requisitos *@
        <div class="row requisitos d-none">
            <div class="col-6">
                <h4>REQUISITOS CARGA</h4>

                <div class="p-2 card">
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="folio"
                                   disabled>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0"><strong>Instrucción</strong></label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="cliente"
                                   disabled>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Equipo de seguridad; chaleco
                            reflejante verde o naranja, casco y botas de casquillo, lentes de seguridad y guantes de
                            seguridad.
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm"
                                   id="direccionorigen" disabled>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Equipo COVID; guantes, cubrebocas,
                            careta y lentes
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm"
                                   id="direcciondestino" disabled="disabled">
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">Llevar SUA en fisico</label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="ruta"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Llevar licencia vigente y en
                            fisico
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="fechasalida"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Llevar tarjeta de circulación de
                            tracto físico
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="fechaentrega"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Llevar certificado de fumigación
                            impreso
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="costo"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">Llevar dos gatas</label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="preciocliente"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">Llevar INE</label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="tipounidad"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Llevar póliza de segur en
                            físico
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="tipounidad"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            contar con alarma de reversa que
                            funcione
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="tipounidad"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">Unidad en buenas condiciones</label>
                    </div>
                </div>
            </div>

            <div class="col-6">
                <h4>REQUISITOS DESCARGA</h4>

                <div class="p-4 shadow bg-white">
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="folio"
                                   disabled>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0"><strong>Instrucción</strong></label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="cliente"
                                   disabled>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Equipo de seguridad; chaleco
                            reflejante verde o naranja, casco y botas de casquillo, lentes de seguridad y guantes de
                            seguridad.
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm"
                                   id="direccionorigen" disabled>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Equipo COVID; guantes, cubrebocas,
                            careta y lentes
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm"
                                   id="direcciondestino" disabled="disabled">
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">Llevar SUA en fisico</label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="ruta"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Llevar licencia vigente y en
                            fisico
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="fechasalida"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Llevar tarjeta de circulación de
                            tracto físico
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="fechaentrega"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Llevar certificado de fumigación
                            impreso
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="costo"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">Llevar dos gatas</label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="preciocliente"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">Llevar INE</label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="tipounidad"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Llevar póliza de segur en
                            físico
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="tipounidad"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            contar con alarma de reversa que
                            funcione
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="tipounidad"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Presentarse 40 minutos antes de su
                            descarga
                        </label>
                    </div>
                    <div class="form-group row">
                        <div class="col-1">
                            <input type="checkbox" class="custome-check form-control form-control-sm" id="tipounidad"
                                   disabled="disabled" required>
                        </div>
                        <label class="col-11 col-form-label col-form-label-sm pl-0">
                            Llevar todos los documentos que le
                            dan al cargar: Hoja de remisión, certificado de calidad, certificado del producto
                        </label>
                    </div>
                </div>
            </div>

        </div>

        @*HISTORIAL*@
        <div class="col-6 historial d-none">
            <div class="text-left d-flex justify-content-between mb-3">
                <h4>HISTORIAL</h4>
                <div style="padding-left:20%;" onclick="selectServicios(this);">
                    <a class="btn btn-sm bg-white" style="font-size:1.8rem;width:3.5rem" href="#">
                        <span class="material-icons">
                            add
                        </span>
                    </a>
                </div>
            </div>

            <table id="table"
                   class="table table-striped table-bordered display table-hover table-historial text-uppercase"
                   width="100%">
                <thead>
                    <tr>
                        <th>REGISTRO</th>
                        <th>USUARIO</th>
                        <th>FECHA</th>
                    </tr>
                </thead>
                <tbody id="historialInfo"></tbody>
            </table>
        </div>
    </div>


    @* documentos *@
    <div class="data-content px-4 text-left d-none" id="div-documentos">
        <div class="p-4">
            <h4>DOCUMENTOS</h4>
            <button class="btn btn-dark px-5" style="border-radius:0px">Generar carta porte</button>
            <div class="row">
                <div class="col-md-6 mt-5">
                    <div class="text-left d-flex justify-content-between">
                        <h4>EVIDENCIA DIGITAL</h4>
                    </div>
                    <div class="p-4 shadow bg-white">
                        <table id="table"
                               class="table table-striped table-bordered display table-hover table-viajes text-uppercase"
                               width="100%">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Tiempo de entrega</th>
                                    <th>Estatus</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="table-info"></tbody>
                        </table>
                    </div>
                </div>
                <div class="col-md-4 mt-5">
                    <div class="text-left d-flex justify-content-between">
                        <h4>EVIDENCIA FÍSICA</h4>
                        <div style="padding-left:20%;">
                            <a class="btn btn-sm bg-white mb-2" href="#">
                                <span class="material-icons">
                                    save
                                </span>
                            </a>
                        </div>
                    </div>
                    <div class="p-4 shadow bg-white">
                        <div class="row">
                            <div class="col-md-6">
                                <h6 class="text-center"><strong>Nombre</strong></h6>
                                <div class="">
                                    <div>
                                        <input type="checkbox" class="custome-check">
                                        <label class="col-form-label col-form-label-sm pl-0">Carta de recepción</label>
                                    </div>
                                </div>
                                <div class="">
                                    <div>
                                        <input type="checkbox" class="custome-check">
                                        <label class="col-form-label col-form-label-sm pl-0">Sello de vigilancia</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6 class="text-center"><strong>Tiempo de entrega</strong></h6>
                                <div class="">
                                    <label class="col-form-label col-form-label-sm pl-4">Vencida</label>
                                </div>
                                <div class="">
                                    <label class="col-form-label col-form-label-sm pl-4">3d 2hrs</label>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>


<!--Modal agregar factura-->
<div class="modal fade" id="modalDiv" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="titulo-modal">AGREGAR</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body text-left">
                <form id="formFactura" name="form" enctype="multipart/form-data" method="post">
                    <div class="form-group col-12">
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" name="file" id="customFile" required>
                            <label class="custom-file-label" for="customFile">Seleccione un archivo</label>
                        </div>
                    </div>
                    <br />
                    <button type="button" class="btn btn-dark guardar" style="width:100%"
                            onclick="UploadFile()">
                        Agregar
                    </button>
                </form>
                @*<form asp-controller="Facturacion" asp-action="UploadFile" method="post"
                    enctype="multipart/form-data">
                    <div class="form-group col-12">
                    <div class="custom-file">
                    <input type="file" class="custom-file-input" name="file" id="customFile">
                    <label class="custom-file-label" for="customFile">Seleccione un archivo</label>
                    </div>
                    </div>
                    <br />
                    <button type="submit" class="btn btn-dark guardar" style="width:100%">Agregar</button>
                    </form>*@
            </div>
        </div>
    </div>
</div>
<!--Modal agregar factura-->

@section Scripts{
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
    <script>
    const TravelId = @TempData["TravelId"] ;
    $(document).ready(function () {
        loadTableFactura();
        loadTableHistorial();
        getMercancia();
        $('#servicios').on('click', function () {

            var container = $('#div-servicios');
            $('#div-requisitos').addClass('d-none');
            $('#div-mercancias').addClass('d-none');
            $('#div-facturacion').addClass('d-none');
            $('#div-documentos').addClass('d-none');
            $('#div-historial').addClass('d-none');

            if (container.css('display') == 'none')
                $('#div-servicios').removeClass('d-none');
            else
                $('#div-servicios').addClass('d-none');

        });

        $('#requisitos').on('click', function () {

            var container = $('#div-requisitos');
            $('#div-servicios').addClass('d-none');
            $('#div-mercancias').addClass('d-none');
            $('#div-facturacion').addClass('d-none');
            $('#div-documentos').addClass('d-none');
            $('#div-historial').addClass('d-none');

            if (container.css('display') == 'none') {
                $('#div-requisitos').removeClass('d-none');
            }
            else
                $('#div-requisitos').addClass('d-none');
        });

        $('#mercancias').on('click', function () {

            var container = $('#div-mercancias');
            $('#div-servicios').addClass('d-none');
            $('#div-requisitos').addClass('d-none');
            $('#div-facturacion').addClass('d-none');
            $('#div-documentos').addClass('d-none');
            $('#div-historial').addClass('d-none');

            if (container.css('display') == 'none')
                $('#div-mercancias').removeClass('d-none');
            else
                $('#div-mercancias').addClass('d-none');

        });

        $('#facturacion').on('click', function () {
            var container = $('#div-facturacion');
            $('#div-servicios').addClass('d-none');
            $('#div-requisitos').addClass('d-none');
            $('#div-documentos').addClass('d-none');
            $('#div-mercancias').addClass('d-none');
            $('#div-hostorial').addClass('d-none');

            if (container.css('display') == 'none') {
                $('#div-facturacion').removeClass('d-none');
                loadTableFactura();
            }
            else
                $('#div-facturacion').addClass('d-none');

        });

        $('#documentos').on('click', function () {

            var container = $('#div-documentos');
            $('#div-servicios').addClass('d-none');
            $('#div-requisitos').addClass('d-none');
            $('#div-facturacion').addClass('d-none');
            $('#div-mercancias').addClass('d-none');
            $('#div-historial').addClass('d-none');

            if (container.css('display') == 'none')
                $('#div-documentos').removeClass('d-none');
            else
                $('#div-documentos').addClass('d-none');

        });

        $('#historial').on('click', function () {

            var container = $('#div-historial');
            $('#div-servicios').addClass('d-none');
            $('#div-requisitos').addClass('d-none');
            $('#div-mercancias').addClass('d-none');
            $('#div-facturacion').addClass('d-none');
            $('#div-documentos').addClass('d-none');

            if (container.css('display') == 'none')
                $('#div-historial').removeClass('d-none');
            else
                $('#div-historial').addClass('d-none');

        });
    });

        postMercancia = form => {
            const data = jQuery(form).serializeArray();
            data.push({ name: 'TravelId', value: TravelId });

            $.post('/Travels/setMercancia', data, () => {
                dToast("success", "Guardado", "Exitoso");
            }).fail(function (error) {
                dToast("error", "Error al guardar los datos", "Error");
            });
        }

        getMercancia = () => {
            const TransportistaId = @Model.Transportista;

            $.post(`/Carriers/Box/getBox/`, { Id_Transportista: TransportistaId }, (response) => {
                response === null && dToast("error", "El transportista de este viaje no tiene parametros de mercancia", "Error");
                const { densidad, d_Opcional, tipoPresentacion, tp_Opcional, peligroso, material, m_Opcional, derramable, valor, v_Opcional, custodia, olorPenetrante, notas } = response;
                densidad && $('#densidad').val(d_Opcional); $('[name=densidad]').attr('checked', true);
                tipoPresentacion && $('#tipopresentacion').val(tp_Opcional); $('[name=tipopresentacion]').attr('checked', true);
                peligroso && $('[name=peligroso]').attr('checked', true);
                material && $('#material').val(m_Opcional); $('[name=material').attr('checked', true);
                derramable && $('[name=derramable]').attr('checked', true);
                valor && $('#valor').val(v_Opcional); $('[name=valor').attr('checked', true);
                custodia && $('[name=custodia]').attr('checked', true);
                olorPenetrante && $('[name=olorpenetrante]').attr('checked', true);
                $('[name=requisitosespeciales]').val(notas);
            });
    }

    showPanel = name => {
        $('.bottomPanel').children().hide();
        $(`.${name}`).removeClass('d-none').show();
    }

    function selectServicios(element) {
        const elemento = jQuery(element);
        elemento.attr('disabled', true);
        $("#modalDiv").modal("show");
    }
    // Add the following code if you want the name of the file appear on select
    $(".custom-file-input").on("change", function () {
        var fileName = $(this).val().split("\\").pop();
        $(this).siblings(".custom-file-label").addClass("selected").html(fileName);
    });

    function UploadFile() {
        var formData = new FormData();
        var myfile = $('#customFile')[0].files[0];
        formData.append('file', $('#customFile')[0].files[0]);
        formData.append('TravelId', TravelId);
        if (myfile !== undefined) {
            $.ajax({
                url: "/Facturacion/UploadFile",
                type: "POST",
                data: formData,
                contentType: false,
                processData: false,
                success: function (data) {
                    $("#modalDiv .close").click();
                    dToast("success", "Archivo guardado correctamente.", "Exitoso");
                    loadTableFactura();
                },
                error: function (data) {
                    dToast("error", "Ocurrio un error al intentar guardar el archivo.", "Error");
                }
            });
        } else {
            dToast("error", "Seleccione un archivo.", "Error");
        }
    }

    function downloadFile(nombre, fullpath) {
        var a = $("<a>")
            .attr("href", fullpath)
            .attr("download", nombre)
            .appendTo("body");

        a[0].click();

        a.remove();
    }

    function loadTableFactura() {
        $("#facturacionInfo").empty();
        $.get("/Facturacion/getFacturas", { TravelId: TravelId }, function (res) {
            res.map(({ nombre, fechacarga, usuario, fullpath }) => {
                $("#facturacionInfo").append(`
                        <tr>
                        <td>${nombre}</td>
                        <td>${moment(fechacarga).format('DD/MM/YYYY')}</td>
                        <td>${usuario}</td>
                        <td class="text-center">
                            <a href="javascript:void();" onclick="downloadFile('${nombre}','${fullpath}')">
                                <span class="material-icons">
                                    file_download
                                </span>
                            </a>
                        </td>
                    </tr>`);
            });
            dTable("table-facturas");
        }).fail(function (error) {
            dToast("error", "Error al tratar de obtener los registros, intenta cerrar sesión y volver a iniciar.", "Error");
        });
    }

    function loadTableHistorial() {
        $("#historialInfo").empty();
        $.get("/Facturacion/getFacturas", { TravelId: TravelId }, function (res) {
            //res.map(({ nombre, fechacarga, usuario, fullpath }) => {
            //    $("#facturacionInfo").append(`
            //        <tr>
            //        <td>${nombre}</td>
            //        <td>${moment(fechacarga).format('DD/MM/YYYY')}</td>
            //        <td>${usuario}</td>
            //        <td class="text-center">
            //            <a href="javascript:void();" onclick="downloadFile('${nombre}','${fullpath}')">
            //                <span class="material-icons">
            //                    file_download
            //                </span>
            //            </a>
            //        </td>
            //    </tr>`);
            //});
            dTable("table-historial");
        }).fail(function (error) {
            dToast("error", "Error al tratar de obtener los registros, intenta cerrar sesión y volver a iniciar.", "Error");
        });
    }
    </script>
}
