@{
    ViewData["Title"] = "Viajes";
}
<div class="data-content">
    <div class="p-4">
        <div class="text-left mb-3">
            <div class="text-uppercase poppins medium size-24 pl-2">Viajes</div>
        </div>

        <div class="p-4 shadow bg-white">
            <table id="table" class="table table-striped table-bordered display table-hover table-viajes text-uppercase" width="100%">
                <thead>
                    <tr>
                        <th>ID Viaje</th>
                        <th>Cliente</th>
                        <th>Origen</th>
                        <th>Destino</th>
                        <th>Fecha Salida</th>
                        <th>Fecha Llegada</th>
                        <th>Estatus</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody id="table-info"></tbody>
            </table>
        </div>

    </div>
</div>

@section Scripts{
    <script>
        $(document).ready(function (event) {
            DT();
        });

        DT = () => {
            Table = $('#table').DataTable({
                destroy: true,
                responsive: true,
                autoWidth: true,
                processing: true,
                serverSide: true,
                ajax: {
                    type: 'POST',
                    url: '/Travels/DataTableTravels'
                },
                columns: [
                    { data: 'folio' },
                    { data: 'cliente' },
                    { data: 'origen' },
                    { data: 'destino' },
                    { data: 'fechaSalida' },
                    { data: 'fechaLlegada' },
                    {
                        data: 'estatus',
                        render: (estatus, type, full, meta) => `<span class="text-primary font-weight-bold">${estatus}</span>`
                    },
                    {
                        render: (data, type, row) => {
                            const { mainTravelId, id } = row;

                            return `<a href="/Travels/AddEdit/${mainTravelId}/${id}"><span class="material-icons">open_in_new</span></a>`;
                        }
                    }
                ],
                language: {
                    url: '/json/dt-es.json'
                },
                initComplete: () => {
                    $('#table_length').html(`<a href="/Travels/AddEdit/0/0" class="btn btn-sm btn-outline-secondary float-right"><span class="material-icons">add</span></a>`).show();
                }
            });
        }
    </script>
} 