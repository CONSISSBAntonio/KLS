@model KLS_WEB.Models.Travels.MainTravelDTO

    <style>
        .card, .cshadow {
            box-shadow: 0px 0px 10px 0px rgb(0 0 0 / 20%) !important;
        }
    </style>
    <div class="p-4">
        <div class="d-flex justify-content-between mb-3">
            <div class="d-flex">
                @*<a href="/@((Model.IsDemand && Model.IsOffer == false) ? "Demand" : Model.IsOffer ? "Offer" : "Travels")" class="my-auto">
                    <div class="material-icons icon-red">arrow_back</div>
                </a>*@
                <div class="text-uppercase poppins medium size-24 pl-2">Nuevo viaje</div>
            </div>
        </div>
    </div>

    <div class="row pl-5">
        <div class="col-6">
            <div class="d-flex justify-content-around">
                <div class="my-auto">
                    @{string id = Model.MainTravel is null ? "0001" : (++Model.MainTravel.Id).ToString("D4"); }
                    <h4 class="text-secondary size-14" id="folio">VT@(string.Concat(DateTime.Now.ToString("yyMM"), id))</h4>
                </div>
                <div class="card text-center">
                    <div class="card-body pb-0 size-12">
                        <b>$00.00 MXN</b>
                        <p class="text-light-grey">COSTO</p>
                    </div>
                </div>
                <div class="card text-center">
                    <div class="card-body pb-0 size-12">
                        <b>$00.00 MXN</b>
                        <p class="text-light-grey">VENTA</p>
                    </div>
                </div>
                <div class="card text-center">

                    <div class="card-body pb-0 size-12">
                        <b>$00.00 MXN</b>
                        <p class="text-light-grey">VACIOS</p>
                    </div>
                </div>
            </div>
            <div class="card mt-3">
                <form asp-controller="Travels" asp-action="SetMainTravel" method="post">
                    <div class="row">
                        <div class="col-6 pl-4 pt-3">
                            <label asp-for="MainTravel.ServiceId" class="form-label">TIPO DE SERVICIO</label>
                            <select asp-for="MainTravel.ServiceId" asp-items="Model.Servicios" class="form-select" style="width: 100%" required></select>
                            <span asp-validation-for="MainTravel.ServiceId" class="text-danger"></span>
                        </div>
                        <div class="col-6 pt-3 pr-4">
                            <label asp-for="MainTravel.Ejecutivo" class="form-label">EJECUTIVO</label>
                            <input asp-for="MainTravel.Ejecutivo" type="text" class="form-control form-control-sm">
                        </div>
                        <div class="col-6 pl-4 pt-3 pb-4">
                            <label asp-for="MainTravel.GrupoMonitor" class="form-label">GRUPO MONITOR</label>
                            <input asp-for="MainTravel.GrupoMonitor" type="text" class="form-control form-control-sm">
                        </div>
                        <p>@Model.MainTravel.ServiceId</p>
                    </div>
                    <div class="pb-3 pl-2">
                        <button type="submit" id="guardar" class="btn btn-dark" style="width: 12.8rem;">GUARDAR</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="col-6 pr-5">
            <div class="d-flex justify-content-between mb-2">
                <b class="my-auto size-12">ADMINISTRACIÓN DE TRAMOS</b>
                <button class="btn btn-dark cshadow"><span class="material-icons">add</span></button>
            </div>
            <div>
                <table class="table table-striped table-bordered display table-hover text-uppercase table-facturas" width="100%" style="height: 17rem;">
                    <thead>
                        <tr>
                            <th>TRAMO</th>
                            <th>COSTO</th>
                            <th>VENTA</th>
                            <th>CLIENTE</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="text-center" colspan="4">AGREGA UN TRAMO PARA COMENZAR</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

@section Scripts{
    <script>
        $(() => {

        });

        const SaveMainTravel = async e => {
            const data = new FormData(e);
            const params = {
                method: 'POST',
                body: data
            };

            try {
                const response = await fetch('/Travels/SetMainTravel/', params);
                const data = await response.json();
                console.log(data);
            } catch (e) {
                console.error(e);
            }

            //$('#guardar').prop('disabled', true);
        }

    </script>
}