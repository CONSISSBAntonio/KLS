@model KLS_WEB.Models.Travels.DTO.TravelDTO


<div class="d-flex justify-content-@(Model.Section.Folio is null ? "end" : "between") col-12">
    @if (Model.Section.Folio != null)
    {
        <div>
            <div class="btn btn-dark" style="cursor: unset;">@Model.Section.Folio</div>
        </div>

    }
    <div>
        @*<button class="btn btn-dark" onclick="AddEditSection(this, document.getElementsByClassName('serviceform'), document.getElementsByClassName('carrierparams'))">GUARDAR</button>*@
        <button class="btn btn-dark" onclick="AddEditSection(this, document.querySelector('#sectionform'))">GUARDAR</button>
    </div>
</div>

<div class="col-12 py-3">
    <div class="card col-12 py-3">
        <div class="d-flex justify-content-end">
            @*<div class="form-check d-flex align-items-center my-auto">
                    <input asp-for="Section.IsEmpty" class="form-check-input my-auto" type="checkbox">
                    <label asp-for="Section.IsEmpty" class="form-check-label size-14">MARCAR TRAMO COMO VACÍO</label>
                </div>*@
            <div>
                <button type="button" class="btn btn-danger d-flex"><span class="material-icons">delete</span>ELIMINAR TRAMO</button>
            </div>
        </div>

        <form id="sectionform" onsubmit="event.preventDefault()" class="row g-3">
            @if (Model.Section.Id != 0)
            {
                @Html.HiddenFor(x => x.Section.Id)
                @Html.HiddenFor(x => x.Section.Folio)
            }
            <div class="col-12 d-flex">
                <input asp-for="Section.IsEmpty" class="form-check my-auto mr-1" type="checkbox">
                <label asp-for="Section.IsEmpty" class="form-label my-auto size-14">MARCAR TRAMO COMO VACÍO</label>
            </div>
            <div class="col-6">
                <label asp-for="Section.ClientesId" class="form-label">CLIENTE</label>
                <select asp-for="Section.ClientesId" asp-items="Model.Selects.Customers" data-val="true" data-val-required="The Person field is required." class="form-select" onchange="GetCustomerOD(this.value)" required></select>
            </div>
            <div class="col-2">
                <label asp-for="Section.FechaSalida" class="form-label">FECHA DE SALIDA</label>
                <input asp-for="Section.FechaSalida" class="form-control">
            </div>
            <div class="col-2">
                <label asp-for="Section.FechaLlegada" class="form-label">FECHA DE LLEGADA</label>
                <input asp-for="Section.FechaLlegada" class="form-control">
            </div>
            <div class="col-2">
                <label asp-for="Section.Anticipacion" class="form-label">TIEMPO DE ANTICIPACIÓN</label>
                <input asp-for="Section.Anticipacion" class="form-control">
            </div>
            <div class="col-6">
                <label asp-for="Section.Cl_Has_OrigenId" class="form-label">ORIGEN</label>
                <select asp-for="Section.Cl_Has_OrigenId" asp-items="Model.Selects.CustomerOrigins" class="form-select" onchange="GetRoute(this.value, 'origin')"></select>
            </div>
            <div class="col-6">
                <label asp-for="Section.Cl_Has_Origen.Direccion" class="form-label">DIRECCIÓN REMITENTE</label>
                <input asp-for="Section.Cl_Has_Origen.Direccion" type="text" class="form-control" disabled>
            </div>
            <div class="col-6">
                <label asp-for="Section.Cl_Has_DestinosId" class="form-label">DESTINO</label>
                <select asp-for="Section.Cl_Has_DestinosId" asp-items="Model.Selects.CustomerDestinations" class="form-select" onchange="GetRoute(this.value, 'destination')"></select>
            </div>
            <div class="col-6">
                <label asp-for="Section.Cl_Has_Destinos.Direccion" class="form-label">DIRECCIÓN DESTINATARIO</label>
                <input asp-for="Section.Cl_Has_Destinos.Direccion" type="text" class="form-control" disabled>
            </div>
            <div class="col-6">
                <label asp-for="Section.RutaId" class="form-label">RUTA</label>
                <select asp-for="Section.RutaId" asp-items="Model.Selects.Routes" class="form-select"></select>
            </div>
            <div class="col-6">
                <label asp-for="Section.SectionTypeId" class="form-label">TIPO DE TRAMO</label>
                <select asp-for="Section.SectionTypeId" asp-items="Model.Selects.SectionType" class="form-select"></select>
            </div>
        </form>
    </div>
</div>

<script>
    $('[type=datetime-local]').map((k, e) => $(e).prop('min', new Date().toISOString().substring(0, 16)));
    $('#Section_Cl_Has_OrigenId, #Section_Cl_Has_DestinosId').trigger('change');
</script>